<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="fav.ico">
  <title>Pedro Spinner</title>


  <!-- HTML2Canvas와 GIF.js 스크립트 추가 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.js"></script>

  <!-- CSS 파일 링크 -->
  <link rel="stylesheet" href="app.css">

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      document.getElementById('download').click();
    });

    function loadFile(input) {
      let file = input.files[0]; // 선택 파일 가져오기

      let container = document.getElementById('image-show');
      container.innerHTML = ''; // 이전 이미지 삭제

      let newImage = document.createElement("img"); // 새 이미지 태그 생성
      newImage.style.width = "100%"; // div에 꽉차게 넣으려고
      newImage.style.height = "100%";
      newImage.style.objectFit = "cover"; // div에 넘치지 않고 들어가게

      // 이미지 소스 가져오기
      newImage.src = URL.createObjectURL(file);

      // 새 이미지를 추가
      container.appendChild(newImage);
    }
/**
    // HTML 요소를 캡처하고 GIF로 저장하는 함수
    function captureAndSaveAsGif(element, filename, options) {
      // HTML 요소를 캡처
      html2canvas(element, options).then(function (canvas) {
        // GIF 생성기 생성
        var gif = new GIF({
          workers: 2,
          quality: 10,
          width: canvas.width,
          height: canvas.height
        });

        // GIF에 프레임 추가
        gif.addFrame(canvas, {
          delay: 200
        }); // 딜레이는 프레임 간의 시간 간격입니다. 필요에 따라 조절하세요.

        // GIF 생성 완료 이벤트 처리
        gif.on('finished', function (blob) {
          // GIF를 다운로드합니다.
          var url = URL.createObjectURL(blob);
          var a = document.createElement('a');
          a.href = url;
          a.download = filename + '.gif';
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
        });

        // GIF 렌더링 시작
        gif.render();
      }); 
    } **/
  </script>
</head>

<body>
  <form class="inputImg" method="post" enctype="multipart/form-data">
    <div class="button">
      <label for="chooseFile">
        👉 File Upload For Spin! 👈
      </label>
    </div>
    <input type="file" id="chooseFile" name="chooseFile" accept="image/*" onchange="loadFile(this)">
  </form>

  <!-- <form class="gifDownload">
    <div class="button">
      <label for="download">
        👉 Gif Download For Spin! 👈
      </label>
    </div>
    <input type="button" id="download" name="download" onclick="captureAndSaveAsGif(document.getElementById('image-show'), 'animation', { scale: 1 })">

  </form> -->

  <div class="spinner" id="image-show">
    <!--<img
    src="pedro.png"
    alt="Pedro!"
  >-->
  </div>
</body>

</html>
